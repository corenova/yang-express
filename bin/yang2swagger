#!/usr/bin/env node

var argv = require('minimist')(process.argv.slice(2), {
  boolean: [ 'help' ],
  alias: {
    help: 'h',
	format: 'f',
    output: 'o'
  },
  string: [ 'format', 'output' ]
  default: {
    format: 'json'
    output: 'swagger.json'
  }
});

var config = require('config');
require('..').eval(config)
  .enable('openapi')
  .in('transform').invoke(argv)
  .then(function (res) {
    require('fs').writeFileSync(argv.output, res, 'utf-8');
    return res;
  })  
